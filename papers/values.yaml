replicaCount: 1

fullnameOverride: papers

image:
  frontend:
    repository: ghcr.io/unsw-cse-comp99-3900/h09b-banana-frontend
    pullPolicy: IfNotPresent
    tag: "2d0b53599bd171489e2d3c0a0e90fb96264e9e91"
  migrations:
    repository: ghcr.io/unsw-cse-comp99-3900/h09b-banana-migration-runner
    pullPolicy: IfNotPresent
    tag: "2d0b53599bd171489e2d3c0a0e90fb96264e9e91"
  worker:
    repository: ghcr.io/unsw-cse-comp99-3900/h09b-banana-queue-worker
    pullPolicy: IfNotPresent
    tag: "2d0b53599bd171489e2d3c0a0e90fb96264e9e91"

imagePullSecrets:
  - name: ghcr-login-secret

podAnnotations:
  sidecar.istio.io/proxyCPU: "0m"

service:
  type: ClusterIP
  port: 80
  targetPort: 3000

resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 100m
    memory: 256Mi

autoscaling:
  enabled: false

database:
  host: supabase-supabase-db
  port: 5432
  name: postgres
  sslMode: disable
  secretName: supabase-db
  userKey: username
  passwordKey: password

email:
  host: smtp.purelymail.com
  port: 465
  tls: true
  secretName: supabase-smtp
  userKey: username
  passwordKey: password
  hostKey: host
  portKey: port
  secureKey: secure

supabase:
  secretName: supabase-jwt
  serviceRoleKey: serviceKey

worker:
  enabled: true
  replicaCount: 1
  nodeEnv: production
  supabaseUrl: https://api.paper.observer
  pollIntervalMs: 30000

oauth:
  secretName: supabase-oauth
  google:
    clientIdKey: google-client-id
    secretKey: google-secret
  github:
    clientIdKey: github-client-id
    secretKey: github-secret

initContainers:
  migrations:
    enabled: true
